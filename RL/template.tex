\documentclass[11pt]{article}

% basic packages
\usepackage[margin=1in]{geometry}
\usepackage[pdftex]{graphicx}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{custom}
\usepackage{lipsum}

% page formatting
\usepackage{fancyhdr}
\pagestyle{fancy}

\renewcommand{\sectionmark}[1]{\markright{\textsf{\arabic{section}. #1}}}
\renewcommand{\subsectionmark}[1]{}
\lhead{\textbf{\thepage} \ \ \nouppercase{\rightmark}}
\chead{}
\rhead{}
\lfoot{}
\cfoot{}
\rfoot{}
\setlength{\headheight}{14pt}

\linespread{1.03} % give a little extra room
\setlength{\parindent}{0.2in} % reduce paragraph indent a bit
\setcounter{secnumdepth}{2} % no numbered subsubsections
\setcounter{tocdepth}{2} % no subsubsections in ToC

\begin{document}

% make title page
\thispagestyle{empty}
\bigskip \
\vspace{0.1cm}

\begin{center}
{\fontsize{22}{22} \selectfont Lecture Notes on}
\vskip 16pt
{\fontsize{36}{36} \selectfont \bf \sffamily Reinforcement Learning}
\vskip 24pt
{\fontsize{18}{18} \selectfont \rmfamily Dhilan Teeluckdharry} 
\vskip 6pt
{\fontsize{14}{14} \selectfont \ttfamily teeluckn@mcmaster.ca} 
\vskip 24pt
\end{center}


% {\parindent0pt \baselineskip=15.5pt \lipsum[1-4]}

% make table of contents
\newpage
\microtoc
\newpage


% main content
\section{Dynamic Programming}

\subsection{Policy Improvement Theorem}
Consider a policies $\pi, \pi'$ s.t.  $q_{\pi}(s,\pi'(s)) \geq v_{\pi}(s) \ \forall \ s \in \mathbb{S}$ 
\[ v_{\pi}(s) \leq q_{\pi}(s, \pi'(s)) \]

\[ =\expec[R_{t+1} + \gamma v_{\pi}(S_{t+1}) \ | \ S_t=s, A_t=\pi'(s)]\]

\[ =\expec_{\pi'}[R_{t+1} + \gamma v_{\pi}(S_{t+1}) \ | \ S_t=s]\]

\[ \leq \expec_{\pi'}[R_{t+1} + \gamma q_{\pi}(S_{t+1}, \pi'(S_{t+1})) \ | \ S_t=s ] \]

\[ =\expec_{\pi'}[R_{t+1} + \gamma \expec_{\pi'}[R_{t+2} + \gamma v_{\pi} (S_{t+2}) \ |  \ S_{t+1}, A_{t+1}=\pi'(S_{t+1})] \ | \ S_t=s]\]

\[ =\expec_{\pi'}[R_{t+1} + \gamma R_{t+2} + \gamma^2 v_{\pi}(S_{t+2}) \ | \ S_t=s]\]

\[\leq \expec_{\pi'}[R_{t+1} + \gamma R_{t+2} + \gamma^2 R_{t+3} + \gamma^3 v_{\pi}(S_{t+3}) \ | \ S_t=s ] \]

\[ \dots \leq \expec_{\pi'}[\sum_{k=0}^N \gamma^k R_{t+k+1} \ | \ S_t=s] = v_{\pi'}(s) \qed\]







% \lipsum[1-4]

\end{document}
